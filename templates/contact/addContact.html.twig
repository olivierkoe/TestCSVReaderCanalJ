{% extends 'base.html.twig' %}

{% block title %}Ajouter un contact{% endblock %}

{% block body %}
<div>
    <section class="container">
        <div class="row">
        <h1>Ajouter un contact </h1>

        <h3>Vos contact actuel :</h3>
    <table border="1">
        <tr>
            <th>Nom</th>
            <th>Prénom</th>
            <th>Email</th>
            <th>Adresse</th>
        </tr>
        {% for contact in contacts %}
        <tr>
            <td>{{ contact.nom }}</td>
            <td>{{ contact.prenom }}</td>
            <td>{{ contact.email }}</td>
            <td>{{ contact.adresse }}</td>
        </tr>
        {% endfor %}
    </table>
    <div class="mt-3">
        <p class="text-danger">Fonctionnalité pas encore implémenté</p>

        <script>
        document.getElementById("ajouter_contact").addEventListener("click", function() {
            // Redirection vers la page d'accueil
            window.location.href = "{{ path('main') }}";
        });
        </script>
    </div>
        {{ form_start(AddContact) }}
            <fieldset class="mb-3">
                <legend class="mb-3">Le nouveau contact</legend>
                {{ form_row(AddContact.email) }}
                {{ form_row(AddContact.nom) }}
                {{ form_row(AddContact.prenom) }}
                {{ form_row(AddContact.adresse) }}
            </fieldset>
            <form class="mb-3" action="{{ path('contact') }}" method="post">
                <button class="mb-3" type="submit" name="telecharger" value="1">Télécharger fichier CSV</button>
                <button type="submit" class="mb-3" id="ajouter_contact">Ajouter le contact</button>
            </form>
        {{ form_end(AddContact) }}
    </div>
        <script>
        // Redirection vers la page des contacts lorsque le formulaire est soumis avec succès
        document.addEventListener("DOMContentLoaded", function () {
            document.querySelector('form').addEventListener('submit', function () {
                window.location.href = "{{ path('main') }}";
            });
        });
    </script>
{% endblock %}